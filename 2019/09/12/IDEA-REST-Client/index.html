<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="学会IDEA REST Client后就可以丢掉postman了">
    

    <!--Author-->
    
        <meta name="author" content="Rafe Lee">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="IDEA REST Client"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Half Soul"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>IDEA REST Client - Half Soul</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 5.4.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-linode" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2019/09/12/IDEA-REST-Client/">
                IDEA REST Client
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-09-12</span>
            
            
            
                <span class="category">
                    <a href="/categories/idea/">idea</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <h1 id="学会IDEA-REST-Client后就可以丢掉postman了"><a href="#学会IDEA-REST-Client后就可以丢掉postman了" class="headerlink" title="学会IDEA REST Client后就可以丢掉postman了"></a>学会IDEA REST Client后就可以丢掉postman了<span id="more"></span></h1><p><img src="http://www.kailing.pub/Uploads/image/20190911/20190911152117_44758.png" alt="学会IDEA REST Client后就可以丢掉postman了"></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>接口调试是每个软件开发从业者必不可少的一项技能，一个项目的的完成，可能接口测试调试的时间比真正开发写代码的时间还要多，几乎是每个开发的日常工作项。所谓工欲善其事必先利其器，在没有尝到IDEA REST真香之前，postman（chrome的一款插件）确实是一个非常不错的选择，具有完备的REST Client功能和请求历史记录功能。但是当使用了IDEA REST之后，postman就可以丢了，因为，IDEA REST Client具有postman的所有功能，而且还有postman没有的功能，继续往下看。</p>
<h1 id="从postman到IDEA-REST-Client"><a href="#从postman到IDEA-REST-Client" class="headerlink" title="从postman到IDEA REST Client"></a>从postman到IDEA REST Client</h1><p>真香定律的原因有如下几个：</p>
<ol>
<li>首先postman的所有功能IDEA REST Client都具备了，如REST Client控制台和历史请求记录</li>
<li>其次如果能够在一个生产工具里完成开发和调试的事情，干嘛要切换到另一个工具呢</li>
<li>然后IDEA REST Client还支持环境配置区分的功能，以及接口响应断言和脚本化处理的能力</li>
<li>IDEA REST Client的请求配置可以用文件配置描述，所以可以跟随项目和项目成员共享</li>
</ol>
<h1 id="IDEA-REST-Client控制台"><a href="#IDEA-REST-Client控制台" class="headerlink" title="IDEA REST Client控制台"></a>IDEA REST Client控制台</h1><p>从顶层工具栏依次Tools -&gt; HTTP Client -&gt; Test RESTFUL Web Service 打开后，IDEA REST Client控制台的界面如下样式：</p>
<p><img src="https://oscimg.oschina.net/oscnet/8645519fed445b945cb6e8cb598bc7e426a.jpg" alt="img"></p>
<p>可以看到，这个控制台展示的功能区和postman已经没什么差别了，包括请求方式，请求参数和请求头的填充都已经包含了，特别说明下的是，如果请求的方式是Authorization :Basic这种方式认证的话，可以点击下图所示的按钮，会弹出填充用户名和密码的窗口出来，填完后会自动补充到Authorization 的header里面去</p>
<p><img src="https://oscimg.oschina.net/oscnet/90e4df5e8f69ed49aa290fd805e1b66e61a.jpg" alt="img"></p>
<h1 id="历史请求记录"><a href="#历史请求记录" class="headerlink" title="历史请求记录"></a>历史请求记录</h1><p>IntelliJ IDEA自动将最近执行的50个请求保存到http-requests-log.http 文件中，该文件存储在项目的.idea / httpRequests / 目录下。使用请求历史记录，您可以快速导航到特定响应并再次发出请求。文件内容大如下图所示，再次发出请求只要点击那个运行按钮即可。如果从请求历史记录再次发出请求，则其执行信息和响应输出的链接将添加到请求历史记录文件的顶部。</p>
<p><img src="https://oscimg.oschina.net/oscnet/e1c90d707188c1f17dbf07d64eb7589478b.jpg" alt="img"></p>
<h1 id="构建HTTP请求脚本"><a href="#构建HTTP请求脚本" class="headerlink" title="构建HTTP请求脚本"></a>构建HTTP请求脚本</h1><p>上面的历史记录就是一个完整的IDEA REST Client请求脚本，如果你是从控制台触发的，那么可以直接复制历史请求记录的文件放到项目里作为HTTP请求的脚本，给其他成员共享，如果不是，也可以直接新建一个.http或者.rest结尾的文件，IDEA会自动识别为HTTP请求脚本。</p>
<h1 id="语法部分"><a href="#语法部分" class="headerlink" title="语法部分"></a>语法部分</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">### 演示POST请求</span><br><span class="line">POST &#123;&#123;baseUrl&#125;&#125;&#125;get?show_env=<span class="number">1</span></span><br><span class="line"><span class="attr">Accept</span>: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">   <span class="string">&quot;name&quot;</span>:<span class="string">&quot;a&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">### 演示GET请求</span><br><span class="line"></span><br><span class="line">GET &#123;&#123;baseUrl&#125;&#125;&#125;/post</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">id=<span class="number">999</span>&amp;value=content</span><br></pre></td></tr></table></figure>

<p>首先通过###三个井号键来分开每个请求体，然后请求url和header参数是紧紧挨着的，请求参数不管是POST的body传参还是GET的parameter传参，都是要换行的</p>
<h1 id="环境区分"><a href="#环境区分" class="headerlink" title="环境区分"></a>环境区分</h1><p>细心的你可能发现了上面示例的代码，没有真实的请求地址，取而代之的，是一个的占位符，这个就是IDEA REST Client真香的地方，支持从指定的配置文件中获取到环境相关的配置参数，不仅baseUrl可以通过占位符替换，一些请求的参数如果和接口环境相关的都可以通过配置文件来区分。</p>
<p>首先在.http的脚本同目录下创建一个名为http-client.private.env.json的文件，然后内容如下，一级的key值时用来区分环境的，比如，dev、uat、pro等，环境下的对象就是一次HTTP请求中能够获取到的环境变量了，你可以直接在请求的HTTP的脚本中通过占位符的方式获取到这里配置的参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;uat&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;http://gateway.xxx.cn/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;username&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;http://localhsot:8888/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;username&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么在选择执行请求的时候，IDEA就会让你选执行那个环境的配置，如：</p>
<p><img src="https://oscimg.oschina.net/oscnet/2f5744a64e2f2e3493754e0d16134c77966.jpg" alt="img"></p>
<h1 id="结果断言"><a href="#结果断言" class="headerlink" title="结果断言"></a>结果断言</h1><p>IDEA REST Client可以针对接口的响应值进行脚本化的断言处理，立马从一个接口调试工具上升到测试工具了，比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">### Successful test: check response status is <span class="number">200</span></span><br><span class="line">GET https:<span class="comment">//httpbin.org/status/200</span></span><br><span class="line"></span><br><span class="line">&gt; &#123;%</span><br><span class="line">client.test(<span class="string">&quot;Request executed successfully&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  client.assert(response.status === <span class="number">200</span>, <span class="string">&quot;Response status is not 200&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">%&#125;</span><br></pre></td></tr></table></figure>



<h1 id="结果值暂存到环境变量"><a href="#结果值暂存到环境变量" class="headerlink" title="结果值暂存到环境变量"></a>结果值暂存到环境变量</h1><p>试想下这样的场景，当一个系统需要通过认证才能访问的时候，如果用postman的时候，是不是先访问登录接口，然后获得token后，手动粘贴复制到新的调试接口的header参数里面去，这太麻烦了，IDEA REST Client还有一个真香的功能，可以完美解决这个问题，请看下面的脚本：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">### 演示POST请求</span><br><span class="line">POST https:<span class="comment">//httpbin.org/post</span></span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;user&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">  <span class="string">&quot;password&quot;</span>: <span class="string">&quot;123456&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt; &#123;% client.global.set(<span class="string">&quot;auth_token&quot;</span>, response.body.json.token); %&#125;</span><br><span class="line">### 演示GET请求</span><br><span class="line"></span><br><span class="line">GET https:<span class="comment">//httpbin.org/headers</span></span><br><span class="line">Authorization: Bearer &#123;&#123;auth_token&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>在第一个认证的请求结束后，可以在response里拿到返回的token信息，然后我们通过脚本设置到了全局变量里，那么在接下来的接口请求中，就可以直接使用双大括号占位符的方式获取到这个token了</p>
<p>来源：<a target="_blank" rel="noopener" href="http://www.kailing.pub/article/index/arcid/257.html">www.kailing.pub/article/index/arcid/257.html</a></p>
<p>END</p>
<p><strong>- End -</strong></p>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/插件/">#插件</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a target="_blank" rel="noopener" href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2021/05/06/hello-world/">Hello World</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2020/09/11/VUE(sass-loader%E3%80%81node-sass)%E5%AE%89%E8%A3%85%E5%8F%8A%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/">VUE(sass-loader、node-sass</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/11/03/%E9%98%BF%E9%87%8C%E4%BA%91OSS%E5%9D%91/">阿里云OSS坑</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/09/12/IDEA-REST-Client/">IDEA REST Client</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/idea/">idea</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/%E5%9B%BE%E4%B9%A6%E6%8E%A8%E8%8D%90/">图书推荐</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Java/">Java</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://telegram.org/">
                            <span class="footer-icon-container">
                                <i class="fa fa-telegram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:18303460126@163.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a target="_blank" rel="noopener" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Disqus Comments -->



</body>

</html>